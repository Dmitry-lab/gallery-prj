{"version":3,"sources":["components/header/header.module.css","components/app/app.module.css","components/card/card.module.css","components/header/header.tsx","servicies/actions/actions.ts","utils/api-requests.ts","components/card/card.tsx","components/gallery/gallery.tsx","components/main/main.tsx","components/app/app.tsx","reportWebVitals.ts","servicies/reducers/app-reducer.ts","index.tsx","components/gallery/gallery.module.css"],"names":["module","exports","Header","className","styles","header","LOAD_IMAGES","TOGGLE_LIKE","DELETE_IMAGE","SET_FILTER","getImagesList","dispatch","page","limit","queryStr","fetch","then","res","ok","json","Promise","reject","status","getImages","data","type","detailImagesList","hits","catch","err","alert","Card","image","useDispatch","deleteButtonStyle","likeButtonStyle","isLiked","card","src","url","alt","info","caption","views","downloads","onClick","id","Gallery","useSelector","store","images","filtered","viewedImages","useMemo","filter","buttonStyle","button","buttonText","gallery","length","content","map","text","Main","App","useEffect","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","state","action","webformatURL","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oGACAA,EAAOC,QAAU,CAAC,eAAe,6BAA6B,OAAS,yB,mBCAvED,EAAOC,QAAU,CAAC,KAAO,oB,uCCAzBD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,KAAO,mBAAmB,QAAU,sBAAsB,kBAAkB,8BAA8B,gBAAgB,4BAA4B,MAAQ,oBAAoB,iBAAiB,6BAA6B,cAAc,0BAA0B,sBAAsB,kCAAkC,cAAc,0BAA0B,cAAc,4B,iJCUnZC,EARI,WACjB,OACE,wBAAQC,UAAWC,IAAO,gBAA1B,SACE,oBAAID,UAAWC,IAAOC,OAAtB,wB,uCCFC,IAAMC,EAA6B,cAC7BC,EAA0B,WAC1BC,EAA+B,eAC/BC,EAA2B,aA0B3BC,EAAgB,kBAAM,SAACC,IC7B7B,SAAmBC,EAAcC,GACtC,IAAMC,EAAQ,UALM,oGAKN,gBAJJ,qCAII,cAHF,MAGE,kCAAmEF,EAAnE,qBAAoFC,GAClG,OAAOE,MAAMD,GACVE,MAAK,SAAAC,GACJ,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAOJ,EAAIK,YDuB9BC,CAJW,EACC,IAITP,MAAK,SAAAQ,GAAI,OAAIb,EAAS,CAAEc,KAAMnB,EAAaoB,iBAAkBF,EAAKG,UAClEC,OAAM,SAAAC,GAAG,OAAIC,MAAM,kJAAD,OAAgCD,SEGxCE,EAjCmB,SAAC,GAAa,IAAZC,EAAW,EAAXA,MAC5BrB,EAAWsB,cAUXC,EAAiB,UAAM9B,IAAO,kBAAb,YAAkCA,IAAO,kBAC1D+B,EAAe,UAAM/B,IAAO,kBAAb,YAAkCA,IAAO,eAAzC,YACnB4B,EAAMI,QAAUhC,IAAO,uBAAyB,IAElD,OACE,yBAAQD,UAAWC,IAAOiC,KAA1B,UACE,qBAAKlC,UAAWC,IAAO4B,MAAOM,IAAKN,EAAMO,IAAKC,IAAG,6BACjD,qBAAKrC,UAAWC,IAAO,iBACvB,6BAAYD,UAAWC,IAAO,mBAA9B,UACE,sBAAKD,UAAWC,IAAOqC,KAAvB,UACE,mBAAGtC,UAAWC,IAAOsC,QAArB,iFAA8CV,EAAMW,SACpD,mBAAGxC,UAAWC,IAAOsC,QAArB,iFAA8CV,EAAMY,gBAEtD,qBAAKzC,UAAWC,IAAO,eAAvB,SACE,wBAAQD,UAAWgC,EAAiBV,KAAK,SAASoB,QAtB/B,WACzBlC,EAAS,CAAEc,KAAMlB,EAAauC,GAAId,EAAMc,UAuBpC,wBAAQ3C,UAAW+B,EAAmBT,KAAK,SAASoB,QApB7B,WAC3BlC,EAAS,CAAEc,KAAMjB,EAAcsC,GAAId,EAAMc,eCyB9BC,EA9BK,WAClB,IAAMpC,EAAWsB,cACjB,EAA6Be,aAAY,SAACC,GAAD,OAAsBA,KAAvDC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,SAEVC,EAAeC,mBAAQ,WAC3B,OAAOF,EAAWD,EAAOI,QAAO,SAAAtB,GAAK,OAAIA,EAAMI,WAAWc,IACzD,CAACC,EAAUD,IAMRK,EAAcJ,EAAQ,UAAM/C,IAAOoD,OAAb,YAAuBpD,IAAM,eAAsBA,IAAOoD,OAChFC,EAAaN,EAAW,8CAAa,kHAE3C,OACE,sBAAKhD,UAAWC,IAAOsD,QAAvB,UACE,wBAAQvD,UAAWoD,EAAaV,QATP,WAC3BlC,EAAS,CAAEc,KAAMhB,KAQf,SAAgEgD,IAC/DL,EAAaO,OACZ,qBAAKxD,UAAWC,IAAOwD,QAAvB,SACGR,EAAaS,KAAI,SAAC7B,GACjB,OAAO,cAAC,EAAD,CAAqBA,MAAOA,GAAjBA,EAAMc,SAG5B,mBAAG3C,UAAWC,IAAO0D,KAArB,iLCxBOC,EANE,WACf,OACE,cAAC,EAAD,K,iBCiBWC,EAfC,WACd,IAAMrD,EAAWsB,cAMjB,OAJAgC,qBAAU,WACRtD,EAASD,OACR,IAGD,sBAAKP,UAAWC,IAAOQ,KAAvB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,QCHSsD,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBpD,MAAK,YAAkD,IAA/CqD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,sBCARO,EAA0B,CAC9BxB,OAAQ,GACRC,UAAU,GCUNwB,GAJc,kBAAXC,QAAwBA,OAAeC,qCACzCD,OAAeC,qCAAqC,IACrDC,KAE4BC,YAAgBC,MAErC/B,EAAQgC,aDTK,WAAmE,IAAlEC,EAAiE,uDAAzDR,EAAcS,EAA2C,uCAC1F,OAAQA,EAAO1D,MACb,KAAKnB,EACH,IAAM4C,EAASiC,EAAOzD,iBAAiBmC,KAAI,SAAA7B,GAEzC,MAAO,CAACc,GAD0Cd,EAA3Cc,GACKH,MADsCX,EAAvCW,MACQC,UAD+BZ,EAAhCY,UACYL,IADoBP,EAArBoD,aACMhD,SAAS,MAE9C,MAAO,CACLc,SACAC,UAAU,GAGd,KAAK5C,EACH,OAAO,2BACF2E,GADL,IAEEhC,OAAQgC,EAAMhC,OAAOW,KAAI,SAAA7B,GACvB,OAAOA,EAAMc,KAAOqC,EAAOrC,GAApB,2BAA6Bd,GAA7B,IAAoCI,SAAUJ,EAAMI,UAAWJ,OAI5E,KAAKxB,EACH,OAAO,2BACF0E,GADL,IAEEhC,OAAQgC,EAAMhC,OAAOI,QAAO,SAAAtB,GAAK,OAAIA,EAAMc,KAAOqC,EAAOrC,QAG7D,KAAKrC,EACH,OAAO,2BACFyE,GADL,IAEE/B,UAAW+B,EAAM/B,WAGrB,QACE,OAAO+B,KCxBgCP,GAE7CU,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUtC,MAAOA,EAAjB,SACE,cAAC,EAAD,QAGJuC,SAASC,eAAe,SAM1BvB,K,kBCpCAlE,EAAOC,QAAU,CAAC,QAAU,yBAAyB,QAAU,yBAAyB,OAAS,wBAAwB,KAAO,sBAAsB,cAAgB,kC","file":"static/js/main.ae15fa20.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header-block\":\"header_header-block__hQuDO\",\"header\":\"header_header__3RmOJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"app_page__fgRnP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card_card__3trER\",\"info\":\"card_info__2HmcP\",\"caption\":\"card_caption__UwF53\",\"caption-content\":\"card_caption-content__vH0zN\",\"delete-button\":\"card_delete-button__8QqDU\",\"image\":\"card_image__ziJgt\",\"default-button\":\"card_default-button__7ZFsg\",\"like-button\":\"card_like-button__sG7GY\",\"like-button_checked\":\"card_like-button_checked__20EtS\",\"likes-block\":\"card_likes-block__3Xzxq\",\"shadow-rect\":\"card_shadow-rect__1Yl1p\"};","import React, {FC} from \"react\";\nimport styles from './header.module.css';\n\nconst Header: FC = () => {\n  return (\n    <header className={styles['header-block']}>\n      <h1 className={styles.header}>Gallery</h1>\n    </header>\n  )\n}\n\nexport default Header;\n","import { getImages } from \"../../utils/api-requests\";\nimport { TDetailImageInfo } from \"../types/data\";\nimport { AppDispatch } from '../types/index';\n\nexport const LOAD_IMAGES: 'LOAD_IMAGES' = 'LOAD_IMAGES';\nexport const TOGGLE_LIKE: 'ADD_LIKE' = 'ADD_LIKE';\nexport const DELETE_IMAGE: 'DELETE_IMAGE' = 'DELETE_IMAGE';\nexport const SET_FILTER: 'SET_FILTER' = 'SET_FILTER';\n\ntype TLoadImages = {\n  type: typeof LOAD_IMAGES;\n  detailImagesList: Array<TDetailImageInfo>;\n}\n\ntype TAddLike = {\n  type: typeof TOGGLE_LIKE;\n  id: number;\n}\n\ntype TDeleteImage = {\n  type: typeof DELETE_IMAGE;\n  id: number;\n}\n\ntype TSetFilter = {\n  type: typeof SET_FILTER;\n}\n\nexport type TApplicationActions = TLoadImages | TAddLike | TDeleteImage | TSetFilter;\n\nconst PAGE = 1;\nconst LIMIT = 40;\n\nexport const getImagesList = () => (dispatch: AppDispatch) => {\n  getImages(PAGE, LIMIT)\n    .then(data => dispatch({ type: LOAD_IMAGES, detailImagesList: data.hits }))\n    .catch(err => alert(`Ошибка обращения к серверу: ${err}`))\n}\n\n\n\n","const BASE_LIST_URL = 'https://pixabay.com/api/?key=23827103-9ad190e11e1d6ccfdb16f473d&q=yellow+flowers&image_type=photo';\nconst KEY = '23827103-9ad190e11e1d6ccfdb16f473d';\nconst QUERY = 'car';\n\nexport function getImages(page: number, limit: number) {\n  const queryStr = `${BASE_LIST_URL}?key=${KEY}&q=${QUERY}&image_type=photo&page=${page}&per_page=${limit}`;\n  return fetch(queryStr)\n    .then(res => {\n      if (res.ok)\n        return res.json()\n\n      return Promise.reject(res.status)\n    })\n}\n\n\n\n","import React, {FC} from 'react';\nimport styles from './card.module.css';\nimport { TImage } from '../../servicies/types/data';\nimport { useDispatch } from 'react-redux';\nimport { DELETE_IMAGE, TOGGLE_LIKE } from '../../servicies/actions/actions';\n\nconst Card: FC<{image: TImage}> = ({image}) => {\n  const dispatch = useDispatch();\n\n  const onLikeClickHandler = () => {\n    dispatch({ type: TOGGLE_LIKE, id: image.id })\n  }\n\n  const onDeleteClickHandler = () => {\n    dispatch({ type: DELETE_IMAGE, id: image.id })\n  }\n\n  const deleteButtonStyle = `${styles['default-button']} ${styles['delete-button']}`\n  const likeButtonStyle = `${styles['default-button']} ${styles['like-button']} ${\n    image.isLiked ? styles['like-button_checked'] : ''}`\n\n  return (\n    <figure className={styles.card}>\n      <img className={styles.image} src={image.url} alt={`Фото`}/>\n      <div className={styles['shadow-rect']} />\n      <figcaption className={styles['caption-content']}>\n        <div className={styles.info}>\n          <p className={styles.caption}>{`Просмотров: ${image.views}`}</p>\n          <p className={styles.caption}>{`Скачиваний: ${image.downloads}`}</p>\n        </div>\n        <div className={styles['likes-block']}>\n          <button className={likeButtonStyle} type='button' onClick={onLikeClickHandler}/>\n        </div>\n        <button className={deleteButtonStyle} type='button' onClick={onDeleteClickHandler}/>\n      </figcaption>\n    </figure>\n  )\n}\n\nexport default Card\n","import React, {FC, useMemo} from \"react\";\nimport styles from './gallery.module.css';\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../servicies/types\";\nimport { TImage } from '../../servicies/types/data';\nimport Card from \"../card/card\";\nimport { useDispatch } from \"react-redux\";\nimport { SET_FILTER } from \"../../servicies/actions/actions\";\n\nconst Gallery: FC = () => {\n  const dispatch = useDispatch();\n  const { images, filtered } = useSelector((store: RootState) => store)\n\n  const viewedImages = useMemo(() => {\n    return filtered ? images.filter(image => image.isLiked) : images\n  }, [filtered, images])\n\n  const onFilterClickHandler = () => {\n    dispatch({ type: SET_FILTER})\n  }\n\n  const buttonStyle = filtered ? `${styles.button} ${styles['button_active']}` : styles.button\n  const buttonText = filtered ? 'Все фото' : 'Только фото с лайками'\n\n  return (\n    <div className={styles.gallery}>\n      <button className={buttonStyle} onClick={onFilterClickHandler}>{buttonText}</button>\n      {viewedImages.length ?\n        <div className={styles.content}>\n          {viewedImages.map((image: TImage) => {\n            return <Card key={image.id} image={image}/>\n          })}\n        </div> :\n        <p className={styles.text}>Нет изображений для просмотра</p>\n      }\n    </div>\n  )\n}\n\nexport default Gallery;\n","import React, {FC} from \"react\";\nimport Gallery from \"../gallery/gallery\";\n\nconst Main: FC = () => {\n  return (\n    <Gallery />\n  )\n}\n\nexport default Main;\n","import React, {FC, useEffect} from 'react';\nimport Header from '../header/header';\nimport Main from '../main/main';\nimport styles from './app.module.css';\nimport { useDispatch } from 'react-redux';\nimport { getImagesList } from '../../servicies/actions/actions';\n\nconst App: FC = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getImagesList())\n  }, [])\n\n  return (\n    <div className={styles.page}>\n      <Header />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { TOGGLE_LIKE, LOAD_IMAGES, DELETE_IMAGE, SET_FILTER } from \"../actions/actions\";\nimport { TApplicationActions } from \"../actions/actions\";\nimport { TImage } from \"../types/data\";\n\ntype TAppState = {\n  images: Array<TImage>;\n  filtered: boolean;\n}\n\nconst initialState: TAppState = {\n  images: [],\n  filtered: false\n}\n\nexport const appReducer = (state = initialState, action: TApplicationActions): TAppState => {\n  switch (action.type) {\n    case LOAD_IMAGES: {\n      const images = action.detailImagesList.map(image => {\n        const {id, views, downloads, webformatURL: url} = image;\n        return {id, views, downloads, url, isLiked: false};\n      })\n      return {\n        images,\n        filtered: false\n      }\n    }\n    case TOGGLE_LIKE: {\n      return {\n        ...state,\n        images: state.images.map(image => {\n          return image.id === action.id ? {...image, isLiked: !image.isLiked} : image\n        })\n      }\n    }\n    case DELETE_IMAGE: {\n      return {\n        ...state,\n        images: state.images.filter(image => image.id !== action.id)\n      }\n    }\n    case SET_FILTER: {\n      return {\n        ...state,\n        filtered: !state.filtered\n      }\n    }\n    default:\n      return state;\n  }\n}\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/app';\nimport reportWebVitals from './reportWebVitals';\nimport { compose, createStore, applyMiddleware} from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport { appReducer } from './servicies/reducers/app-reducer';\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nconst composeEnhancers =\n  typeof window === 'object' && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\n\nexport const store = createStore(appReducer, enhancer);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"gallery_gallery__8GeVX\",\"content\":\"gallery_content__3WNxd\",\"button\":\"gallery_button__lY3rn\",\"text\":\"gallery_text__1B7t8\",\"button_active\":\"gallery_button_active__3xFNN\"};"],"sourceRoot":""}